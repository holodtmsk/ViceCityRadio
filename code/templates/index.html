<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vice City Radio</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <h1>Vice City Radio Stations</h1>

    <div id="station-name">
        <h2 id="current-station">V-Rock</h2>
    </div>

    <audio id="radio-player" controls>
        <source id="radio-source" src="https://disk.yandex.ru/d/NSofbwMSIUqSdA" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <button id="play-stop-btn">Play</button>

    <div>
        <button onclick="switchStation('V-Rock', 'https://disk.yandex.ru/d/NSofbwMSIUqSdA')">V-Rock</button>
        <button onclick="switchStation('Wave 103', 'https://disk.yandex.ru/d/WjhlOGNdtCbA5w')">Wave 103</button>
        <button onclick="switchStation('Emotion 98.3', 'https://disk.yandex.ru/d/U3nGEWXN06uuYg')">Emotion 98.3</button>
    </div>

    <script>
        const audioPlayer = document.getElementById('radio-player');
        const playStopBtn = document.getElementById('play-stop-btn');

        // Play/Stop button logic
        playStopBtn.addEventListener('click', function() {
            if (audioPlayer.paused) {
                audioPlayer.play();
                playStopBtn.textContent = 'Stop';
            } else {
                audioPlayer.pause();
                playStopBtn.textContent = 'Play';
            }
        });

        // Function to switch radio stations
        function switchStation(stationName, stationUrl) {
            document.getElementById('current-station').textContent = stationName;
            audioPlayer.src = stationUrl;
            audioPlayer.currentTime = Math.random() * audioPlayer.duration; // Случайная позиция старта
            audioPlayer.play();
            playStopBtn.textContent = 'Stop';
        }

        // Autoplay the first station on page load
        window.onload = function() {
            audioPlayer.play();
            playStopBtn.textContent = 'Stop';
        };
    </script>
</body>
</html>
